(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{683:function(e,t,a){e.exports=a.p+"static/media/foo.152595c5.txt"},695:function(e,t,a){e.exports=a(712)},700:function(e,t,a){},701:function(e,t,a){},712:function(e,t,a){"use strict";a.r(t);var n=a(12),s=a.n(n),o=a(532),r=a.n(o),i=(a(700),a(533)),c=(a(701),a(6)),l=a(1),h=a(2),u=a(3),d=a(0),f=a(4),m=a(5),p=a(9),g=a(10),k=[0,2,4,5,7,9,11],b=[].concat(k,Object(g.a)(k.map(function(e){return e+12}))),v=([].concat(Object(g.a)(b),Object(g.a)(k.map(function(e){return e+24}))),[].concat(Object(g.a)(k.map(function(e){return e-12}).slice(4)),k,Object(g.a)(k.map(function(e){return e+12}).slice(0,5)))),O=function(){function e(t,a,n){Object(l.a)(this,e),this.degree=t,this.semitoneDist=k[t-1],this.intervals=a,this.nextChordIdxs=n}return Object(h.a)(e,[{key:"degree",value:function(){return this.degree}},{key:"semitoneDist",value:function(){return this.semitoneDist}},{key:"intervals",value:function(){return this.intervals}},{key:"nextChordIdxs",value:function(){return this.nextChordIdxs}},{key:"nextChordIdx",value:function(){return this.nextChordIdxs[Math.floor(Math.random()*this.nextChordIdxs.length)]}},{key:"generateVoicing",value:function(e){if(e<3)return this.intervals.slice(0,3);var t=this.intervals.slice(1,e);t.sort(function(){return Math.random()-.5});for(var a=1;a<t.length;a++)for(;t[a]<t[a-1];)t[a]+=12;return t.unshift(0),t}},{key:"generateMode",value:function(){return this.intervals.map(function(e){return e>=12?e-12:e})}}]),e}(),w=function(e){return e.map(function(e){return e-1})},j=[new O(1,[0,4,7,11,14,17,21],w([2,3,4,5,6,7])),new O(2,[0,3,7,10,14,17,21],w([3,5,7])),new O(3,[0,3,7,10,13,17,20],w([4,6])),new O(4,[0,4,7,11,14,18,21],w([2,5])),new O(5,[0,4,7,10,14,17,21],w([1,3,6])),new O(6,[0,3,7,10,14,17,20],w([2,4])),new O(7,[0,3,6,10,13,17,20],w([1,3]))],y=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"generate",value:function(e){if(e<2)return null;for(var t=[],a=j[Math.floor(Math.random()*j.length)],n=0;n<e;n++)t.push(new O(a.degree,Object(g.a)(a.intervals),Object(g.a)(a.nextChordIdxs))),a=j[a.nextChordIdx()];return t}}]),e}(),C=[1,2,3,4,5,6],L="".concat("/lofigen","/PianoSamples/"),x=[];["A","C","D#","F#"].forEach(function(e){C.forEach(function(t){x.push(e+t)})});var E={};x.forEach(function(e){var t=e;e.includes("#")&&(t=e.replace("#","sharp")),E[e]="".concat(L+t,"v").concat(1,".mp3")});var M=E,S=new p.b(1e3,"lowpass"),A=new p.h(.5),N=function(){function e(t){Object(l.a)(this,e),this.sampler=new p.f(M,function(){t()}).chain(S,A,p.d)}return Object(h.a)(e,[{key:"sampler",value:function(){return this.sampler}}]),e}(),D={C4:"".concat("/lofigen","/DrumSamples/kick.mp3")},P=new p.j(-3),I=function(){function e(t){Object(l.a)(this,e),this.sampler=new p.f(D,function(){t()}).chain(P,p.d)}return Object(h.a)(e,[{key:"sampler",value:function(){return this.sampler}}]),e}(),z={C4:"".concat("/lofigen","/DrumSamples/snare.mp3")},W=new p.b(6e3,"lowpass"),B=new p.j(-6),F=new p.h(.3),G=function(){function e(t){Object(l.a)(this,e),this.sampler=new p.f(z,function(){t()}).chain(W,B,F,p.d)}return Object(h.a)(e,[{key:"sampler",value:function(){return this.sampler}}]),e}(),J={C4:"".concat("/lofigen","/DrumSamples/hat.mp3")},R=new p.b(2400,"lowpass"),V=new p.j(-9),H=new p.h(.7),$=function(){function e(t){Object(l.a)(this,e),this.sampler=new p.f(J,function(){t()}).chain(R,V,H,p.d)}return Object(h.a)(e,[{key:"sampler",value:function(){return this.sampler}}]),e}(),q=new p.b(2e3,"lowshelf"),K=new p.j(-32),Q=new p.e("pink").chain(q,K,p.d),T=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],U=[.1,.3,.2,.15,.15,.025,.025,.05],X=a(683),Y=a.n(X),Z="",_=new p.a({threshold:-6,ratio:3,attack:.5,release:.1}),ee=new p.b(2e3,"lowpass"),te=new p.j(-6);p.d.chain(_,ee,te),p.i.bpm.value=156,p.i.swing=1;var ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).nextChord=function(){fetch(Y.a).then(function(e){return e.text()}).then(function(e){Z!=e?(console.log("changed:",e),Z=e):console.log("same:",e)});var e=a.state.progress===a.state.progression.length-1?0:a.state.progress+1,t=Math.random()<.15,n=Math.random()<.2,s=Math.random()<.25,o=.3*Math.random()+.2,r=Math.random()<.25;4===a.state.progress?a.setState(Object(c.a)({},a.state,{progress:e,kickOff:t,snareOff:n,hatOff:s})):0===a.state.progress?a.setState(Object(c.a)({},a.state,{progress:e,kickOff:t,snareOff:n,hatOff:s,melodyDensity:o,melodyOff:r})):a.setState(Object(c.a)({},a.state,{progress:e}))},a.playChord=function(){var e=a.state.progression[a.state.progress],t=p.c(a.state.key+"3").transpose(e.semitoneDist),n=e.generateVoicing(4),s=p.c(t).harmonize(n).map(function(e){return p.c(e).toNote()});a.pn.triggerAttackRelease(s,"1n"),a.nextChord()},a.playMelody=function(){if(!a.state.melodyOff&&Math.random()<a.state.melodyDensity){var e=Math.min(a.state.scalePos,7)+1,t=Math.min(a.state.scale.length-a.state.scalePos,7),n=e>1,s=t>1;n&&s&&(Math.random()>.5?s=!n:n=!s);var o=n?U.slice(0,e):U.slice(0,t),r=o.reduce(function(e,t){return e+t},0);o=o.map(function(e){return e/r});for(var i=1;i<o.length;i++)o[i]+=o[i-1];for(var l=Math.random(),h=0,u=!1;!u;)l<=o[h]?u=!0:h++;var d=n?-h:h,f=a.state.scalePos+d;a.setState(Object(c.a)({},a.state,{scalePos:f})),a.pn.triggerAttackRelease(a.state.scale[f],"2n")}},a.generateProgression=function(){var e=v,t=T[Math.floor(Math.random()*T.length)],n=p.c(t+"5").harmonize(e).map(function(e){return p.c(e).toNote()}),s=y.generate(8),o=Math.floor(Math.random()*e.length);a.setState(Object(c.a)({},a.state,{key:t,progress:0,progression:s,scale:n,genChordsOnce:!0,scalePos:o}))},a.toggle=function(){a.setState(Object(c.a)({},a.state,{progress:0})),"started"===p.i.state?(a.noise.stop(),p.i.stop(),a.props.toggleWakeLock()):(p.k(),p.i.start(),a.state.active?a.noise.start(0):a.noise.stop(0),a.chords.start(0),a.melody.start(0),a.kickLoop.start(0),a.snareLoop.start(0),a.hatLoop.start(0),a.props.toggleWakeLock())},a.state={key:"C",progression:[],scale:[],progress:0,pianoLoaded:!1,kickLoaded:!1,snareLoaded:!1,hatLoaded:!1,contextStarted:!1,genChordsOnce:!1,kickOff:!1,snareOff:!1,hatOff:!1,melodyDensity:.33,melodyOff:!1,scalePos:0,active:!1},a.pn=new N(function(){return a.setState(Object(c.a)({},a.state,{pianoLoaded:!0}))}).sampler,a.kick=new I(function(){return a.setState(Object(c.a)({},a.state,{kickLoaded:!0}))}).sampler,a.snare=new G(function(){return a.setState(Object(c.a)({},a.state,{snareLoaded:!0}))}).sampler,a.hat=new $(function(){return a.setState(Object(c.a)({},a.state,{hatLoaded:!0}))}).sampler,a.noise=Q,a.chords=new p.g(function(e,t){a.playChord()},[""],"1n"),a.melody=new p.g(function(e,t){a.playMelody()},[""],"8n"),a.kickLoop=new p.g(function(e,t){a.state.kickOff||("C4"===t&&Math.random()<.9?a.kick.triggerAttack(t):"."===t&&Math.random()<.1&&a.kick.triggerAttack("C4"))},["C4","","","","","","","C4","C4","",".","","","","",""],"8n"),a.snareLoop=new p.g(function(e,t){a.state.snareOff||""!==t&&Math.random()<.8&&a.snare.triggerAttack(t)},["","C4"],"2n"),a.hatLoop=new p.g(function(e,t){a.state.hatOff||""!==t&&Math.random()<.8&&a.hat.triggerAttack(t)},["C4","C4","C4","C4","C4","C4","C4","C4"],"4n"),a.chords.humanize=!0,a.melody.humanize=!0,a.kickLoop.humanize=!0,a.snareLoop.humanize=!0,a.hatLoop.humanize=!0,a.noise.stop(0),a.state.active=!1,a.nextChord=a.nextChord.bind(Object(m.a)(Object(m.a)(a))),a.playChord=a.playChord.bind(Object(m.a)(Object(m.a)(a))),a.playMelody=a.playMelody.bind(Object(m.a)(Object(m.a)(a))),a.generateProgression=a.generateProgression.bind(Object(m.a)(Object(m.a)(a))),a.toggle=a.toggle.bind(Object(m.a)(Object(m.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"toggleClass",value:function(){if("started"===p.i.state){var e=this.state.active;this.setState({active:!e}),e?this.noise.stop(0):this.noise.start(0)}}},{key:"render",value:function(){var e=this,t=this.state.progression.map(function(t,a){return s.a.createElement("li",{className:a===(e.state.progress+7)%8?"live":"",key:a},t.degree)}),a=s.a.createElement("div",{className:"prep"},s.a.createElement("div",{className:"sampleLoad"},this.state.pianoLoaded&&this.state.kickLoaded&&this.state.snareLoaded&&this.state.hatLoaded?this.state.contextStarted?"":s.a.createElement("button",{className:"contextBtn",onClick:function(){p.k(),e.setState(Object(c.a)({},e.state,{contextStarted:!0}))}},"stArt Audio context"):"loAding sAmples")),n=this.state.active?"Enabled Noise Sound":"Disabled Noise Sound",o=this.state.active?{backgroundColor:"#002200",color:"white"}:{backgroundColor:"#220000",color:"white"},r=s.a.createElement("div",{className:"playable"},s.a.createElement("button",{className:"generateBtn",onClick:this.generateProgression},"generAte cHords"),this.state.genChordsOnce?s.a.createElement("div",null,s.a.createElement("div",{className:"info"},s.a.createElement("h3",{className:"key"},this.state.key.toLowerCase()),s.a.createElement("ol",{className:"progressionList"},t)),s.a.createElement("button",{className:"playBtn",onClick:this.toggle},"started"===p.i.state?"stop":"plAy"),s.a.createElement("div",null,"started"===p.i.state?s.a.createElement("button",{className:this.state.active&&"active",onClick:this.toggleClass.bind(this),style:o},n):"")):"");return s.a.createElement("div",null,s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"instructions"},s.a.createElement("ol",null,this.state.pianoLoaded&&this.state.kickLoaded&&this.state.snareLoaded&&this.state.hatLoaded?"":s.a.createElement("li",null,"WAit for sAmples to loAd"),this.state.contextStarted?"":s.a.createElement("li",null,"stArt Audio context"))),this.state.pianoLoaded&&this.state.kickLoaded&&this.state.snareLoaded&&this.state.hatLoaded&&this.state.contextStarted?r:a),s.a.createElement("section",{className:"backdrop"}))}}]),t}(n.Component),ne=function(e){var t=Object(i.a)(),a=t.toggleWakeLock;t.wakeLockActive;return s.a.createElement("div",{className:"App"},s.a.createElement(ae,{toggleWakeLock:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[695,1,2]]]);
//# sourceMappingURL=main.0795247f.chunk.js.map